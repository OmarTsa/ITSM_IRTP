@page "/inventario"
@using ITSM.Entidades
@using ITSM.Negocio
@inject TicketNegocio TicketNegocio

<MudText Typo="Typo.h4" Class="mb-4">Inventario de Activos</MudText>

<MudTable Items="@listaActivos" Hover="true" Bordered="true">
    <HeaderContent>
        <MudTh>Nombre</MudTh>
        <MudTh>Código</MudTh>
        <MudTh>Usuario Asignado</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd>@context.Nombre</MudTd>
        @* CORRECCIÓN AQUÍ: Usar CodPatrimonial *@
        <MudTd>@context.CodPatrimonial</MudTd>
        <MudTd>@(context.UsuarioAsignado?.NombreCompleto ?? "Sin asignar")</MudTd>
    </RowTemplate>
</MudTable>

@code {
    private List<Activo> listaActivos = new();

    protected override async Task OnInitializedAsync()
    {
        // Ahora este método sí existe gracias a la corrección en TicketNegocio
        listaActivos = await TicketNegocio.ListarActivosAsync();
    }
}