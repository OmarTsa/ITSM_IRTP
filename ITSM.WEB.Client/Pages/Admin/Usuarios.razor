@page "/admin/usuarios"
@using ITSM.Entidades
@using ITSM.WEB.Client.Servicios
@using MudBlazor

@inject UsuarioServicio _usuarioServicio

<MudText Typo="Typo.h5" Class="mb-4">Gestión de Usuarios</MudText>

<MudTable Items="@usuarios" Hover="true" Striped="true" Elevation="3">
    <HeaderContent>
        <MudTh>ID</MudTh>
        <MudTh>Usuario</MudTh>
        <MudTh>Nombre</MudTh>
        <MudTh>Correo</MudTh>
        <MudTh>Rol</MudTh>
        <MudTh>Estado</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="ID">@context.IdUsuario</MudTd>
        <MudTd DataLabel="Usuario"><b>@context.Username</b></MudTd>
        <MudTd DataLabel="Nombre">@context.NombreCompleto</MudTd>
        <MudTd DataLabel="Correo">@context.Email</MudTd>
        <MudTd DataLabel="Rol">@context.Rol?.Nombre</MudTd>
        <MudTd DataLabel="Estado">
            @if (context.Activo == 1)
            {
                <MudChip T="string" Color="Color.Success" Size="Size.Small">Activo</MudChip>
            }
            else
            {
                <MudChip T="string" Color="Color.Error" Size="Size.Small">Inactivo</MudChip>
            }
        </MudTd>
    </RowTemplate>
</MudTable>

@code {
    private List<Usuario> usuarios = new();

    protected override async Task OnInitializedAsync()
    {
        usuarios = await _usuarioServicio.ListarUsuarios();
    }
}