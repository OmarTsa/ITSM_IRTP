@page "/"
@using MudBlazor
@using Microsoft.AspNetCore.Components.Authorization

@rendermode InteractiveWebAssembly

<MudText Typo="Typo.h4" Class="mb-4">Dashboard Principal</MudText>

<AuthorizeView>
    <Authorized>
        <MudAlert Severity="Severity.Info" Class="mb-4">Bienvenido de nuevo, <b>@context.User.Identity?.Name</b>.</MudAlert>

        <MudGrid>
            @* KPIs visibles solo para usuarios autenticados *@
            <MudItem xs="12" sm="6" md="3">
                <MudPaper Class="pa-4" Style="height:100px; background-color: var(--mud-palette-primary);">
                    <MudText Color="Color.Surface">Tickets Abiertos</MudText>
                    <MudText Typo="Typo.h4" Color="Color.Surface">12</MudText>
                </MudPaper>
            </MudItem>
            <MudItem xs="12" sm="6" md="3">
                <MudPaper Class="pa-4" Style="height:100px; background-color: var(--mud-palette-secondary);">
                    <MudText Color="Color.Surface">Mis Activos</MudText>
                    <MudText Typo="Typo.h4" Color="Color.Surface">3</MudText>
                </MudPaper>
            </MudItem>
        </MudGrid>
    </Authorized>
    <NotAuthorized>
        <MudPaper Class="pa-8 d-flex flex-column align-center justify-center" Elevation="3">
            <MudIcon Icon="@Icons.Material.Filled.Lock" Size="Size.Large" Color="Color.Default" Class="mb-4" />
            <MudText Typo="Typo.h5">Acceso Limitado</MudText>
            <MudText Align="Align.Center">Inicia sesión para visualizar las métricas y gestionar tus solicitudes de soporte.</MudText>
            <MudButton Variant="Variant.Filled" Color="Color.Primary" Class="mt-4" OnClick="@(() => Navigation.NavigateTo("/login"))">
                Ir al Login
            </MudButton>
        </MudPaper>
    </NotAuthorized>
</AuthorizeView>

@code {
    [Inject] NavigationManager Navigation { get; set; } = default!;
}